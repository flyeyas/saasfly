<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMTP邮箱配置 - 后台管理系统</title>
    <link rel="stylesheet" href="../assets/css/global.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 后台管理布局 */
        .admin-layout {
            display: flex;
            min-height: 100vh;
            background: var(--gray-50);
        }
        
        .admin-sidebar {
            width: 280px;
            background: white;
            box-shadow: var(--shadow-lg);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }
        
        .admin-main {
            flex: 1;
            margin-left: 280px;
            display: flex;
            flex-direction: column;
        }
        
        .admin-header {
            background: white;
            padding: var(--space-4) var(--space-6);
            box-shadow: var(--shadow-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-content {
            flex: 1;
            padding: var(--space-6);
        }
        
        /* 侧边栏样式 */
        .sidebar-brand {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-200);
            text-align: center;
        }
        
        .sidebar-brand-icon {
            font-size: var(--text-2xl);
            color: var(--primary-500);
            margin-bottom: var(--space-2);
        }
        
        .sidebar-brand-text {
            font-family: var(--font-game);
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--gray-900);
        }
        
        .admin-nav {
            padding: var(--space-4) 0;
        }
        
        .nav-section {
            margin-bottom: var(--space-6);
        }
        
        .nav-section-title {
            font-size: var(--text-xs);
            font-weight: var(--font-semibold);
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0 var(--space-6) var(--space-2);
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: var(--space-3) var(--space-6);
            color: var(--gray-700);
            text-decoration: none;
            transition: all var(--duration-fast) var(--ease-out);
            border-left: 3px solid transparent;
        }
        
        .nav-item:hover {
            background: var(--primary-50);
            color: var(--primary-600);
            border-left-color: var(--primary-200);
        }
        
        .nav-item.active {
            background: var(--primary-100);
            color: var(--primary-700);
            border-left-color: var(--primary-500);
            font-weight: var(--font-medium);
        }
        
        .nav-item-icon {
            width: 20px;
            margin-right: var(--space-3);
            text-align: center;
        }
        
        .user-info {
            padding: var(--space-4) var(--space-6);
            border-top: 1px solid var(--gray-200);
            margin-top: auto;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: var(--primary-100);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-600);
            font-weight: var(--font-bold);
            margin-bottom: var(--space-2);
        }
        
        .user-name {
            font-weight: var(--font-medium);
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }
        
        .user-role {
            font-size: var(--text-sm);
            color: var(--gray-500);
        }
        
        /* 页面头部 */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
        }
        
        .page-title {
            font-size: var(--text-2xl);
            font-weight: var(--font-bold);
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }
        
        .page-subtitle {
            color: var(--gray-600);
            font-size: var(--text-base);
        }
        
        .page-actions {
            display: flex;
            gap: var(--space-3);
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
            font-size: var(--text-sm);
            color: var(--gray-600);
        }
        
        .breadcrumb a {
            color: var(--primary-600);
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb-separator {
            color: var(--gray-400);
        }
        
        /* 状态指示器 */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            margin-bottom: var(--space-6);
        }
        
        .status-indicator.connected {
            background: var(--success-50);
            color: var(--success-700);
            border: 1px solid var(--success-200);
        }
        
        .status-indicator.disconnected {
            background: var(--error-50);
            color: var(--error-700);
            border: 1px solid var(--error-200);
        }
        
        .status-indicator.testing {
            background: var(--warning-50);
            color: var(--warning-700);
            border: 1px solid var(--warning-200);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
        }
        
        .status-dot.connected {
            background: var(--success-500);
        }
        
        .status-dot.disconnected {
            background: var(--error-500);
        }
        
        .status-dot.testing {
            background: var(--warning-500);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* 配置卡片 */
        .config-card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            margin-bottom: var(--space-6);
        }
        
        .config-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
        }
        
        .config-title {
            font-size: var(--text-xl);
            font-weight: var(--font-semibold);
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }
        
        .config-subtitle {
            color: var(--gray-600);
            font-size: var(--text-sm);
        }
        
        .config-body {
            padding: var(--space-6);
        }
        
        /* 表单样式 */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-6);
        }
        
        .form-group {
            margin-bottom: var(--space-6);
        }
        
        .form-label {
            display: block;
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--gray-700);
            margin-bottom: var(--space-2);
        }
        
        .form-label.required::after {
            content: ' *';
            color: var(--error-500);
        }
        
        .form-input {
            width: 100%;
            padding: var(--space-3);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            transition: all var(--duration-fast) var(--ease-out);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px var(--primary-100);
        }
        
        .form-input.error {
            border-color: var(--error-500);
        }
        
        .form-input.success {
            border-color: var(--success-500);
        }
        
        .form-help {
            font-size: var(--text-xs);
            color: var(--gray-500);
            margin-top: var(--space-1);
        }
        
        .form-error {
            font-size: var(--text-xs);
            color: var(--error-500);
            margin-top: var(--space-1);
        }
        
        .form-success {
            font-size: var(--text-xs);
            color: var(--success-500);
            margin-top: var(--space-1);
        }
        
        /* 开关组件 */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-300);
            transition: var(--duration-fast);
            border-radius: 24px;
        }
        
        .switch-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: var(--duration-fast);
            border-radius: 50%;
        }
        
        .switch input:checked + .switch-slider {
            background-color: var(--primary-500);
        }
        
        .switch input:checked + .switch-slider:before {
            transform: translateX(26px);
        }
        
        .switch-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-4);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-4);
        }
        
        .switch-info {
            flex: 1;
        }
        
        .switch-title {
            font-weight: var(--font-medium);
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }
        
        .switch-description {
            font-size: var(--text-sm);
            color: var(--gray-600);
        }
        
        /* 按钮样式 */
        .btn-primary {
            background: var(--primary-500);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-out);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .btn-primary:hover {
            background: var(--primary-600);
            transform: translateY(-1px);
        }
        
        .btn-primary:disabled {
            background: var(--gray-300);
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-out);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }
        
        .btn-success {
            background: var(--success-500);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-out);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .btn-success:hover {
            background: var(--success-600);
        }
        
        .btn-warning {
            background: var(--warning-500);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-out);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .btn-warning:hover {
            background: var(--warning-600);
        }
        
        /* 预设配置 */
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }
        
        .preset-card {
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-out);
        }
        
        .preset-card:hover {
            border-color: var(--primary-300);
            background: var(--primary-50);
        }
        
        .preset-card.selected {
            border-color: var(--primary-500);
            background: var(--primary-100);
        }
        
        .preset-title {
            font-weight: var(--font-semibold);
            color: var(--gray-900);
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .preset-description {
            font-size: var(--text-sm);
            color: var(--gray-600);
            margin-bottom: var(--space-3);
        }
        
        .preset-details {
            font-size: var(--text-xs);
            color: var(--gray-500);
        }
        
        /* 测试结果 */
        .test-result {
            padding: var(--space-4);
            border-radius: var(--radius-md);
            margin-top: var(--space-4);
            display: none;
        }
        
        .test-result.success {
            background: var(--success-50);
            border: 1px solid var(--success-200);
            color: var(--success-700);
        }
        
        .test-result.error {
            background: var(--error-50);
            border: 1px solid var(--error-200);
            color: var(--error-700);
        }
        
        .test-result.show {
            display: block;
        }
        
        .test-result-title {
            font-weight: var(--font-semibold);
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .test-result-message {
            font-size: var(--text-sm);
        }
        
        /* 日志显示 */
        .log-container {
            background: var(--gray-900);
            color: var(--gray-100);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            font-family: monospace;
            font-size: var(--text-sm);
            max-height: 300px;
            overflow-y: auto;
            margin-top: var(--space-4);
        }
        
        .log-line {
            margin-bottom: var(--space-1);
        }
        
        .log-timestamp {
            color: var(--gray-400);
        }
        
        .log-level-info {
            color: var(--primary-300);
        }
        
        .log-level-success {
            color: var(--success-300);
        }
        
        .log-level-error {
            color: var(--error-300);
        }
        
        /* 响应式设计 */
        @media (max-width: 1024px) {
            .admin-sidebar {
                transform: translateX(-100%);
                transition: transform var(--duration-normal) var(--ease-out);
            }
            
            .admin-sidebar.open {
                transform: translateX(0);
            }
            
            .admin-main {
                margin-left: 0;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .preset-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-4);
            }
        }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- 侧边栏 -->
        <aside class="admin-sidebar">
            <div class="sidebar-brand">
                <div class="sidebar-brand-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="sidebar-brand-text">GameHub Admin</div>
            </div>
            
            <nav class="admin-nav">
                <div class="nav-section">
                    <div class="nav-section-title">主要功能</div>
                    <a href="admin.html" class="nav-item">
                        <i class="fas fa-tachometer-alt nav-item-icon"></i>
                        <span>仪表盘</span>
                    </a>
                    <a href="admin-games.html" class="nav-item">
                        <i class="fas fa-gamepad nav-item-icon"></i>
                        <span>游戏管理</span>
                    </a>
                    <a href="admin-users.html" class="nav-item">
                        <i class="fas fa-users nav-item-icon"></i>
                        <span>用户管理</span>
                    </a>
                    <a href="admin-categories.html" class="nav-item">
                        <i class="fas fa-folder nav-item-icon"></i>
                        <span>分类管理</span>
                    </a>
                    <a href="admin-tags.html" class="nav-item">
                        <i class="fas fa-tags nav-item-icon"></i>
                        <span>标签管理</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">营销推广</div>
                    <a href="admin-ads.html" class="nav-item">
                        <i class="fas fa-bullhorn nav-item-icon"></i>
                        <span>广告管理</span>
                    </a>
                    <a href="admin-adsense.html" class="nav-item">
                        <i class="fab fa-google nav-item-icon"></i>
                        <span>AdSense配置</span>
                    </a>
                    <a href="admin-analytics.html" class="nav-item">
                        <i class="fas fa-chart-bar nav-item-icon"></i>
                        <span>数据分析</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">系统设置</div>
                    <a href="admin-config.html" class="nav-item">
                        <i class="fas fa-cog nav-item-icon"></i>
                        <span>系统配置</span>
                    </a>
                    <a href="admin-smtp.html" class="nav-item active">
                        <i class="fas fa-envelope nav-item-icon"></i>
                        <span>邮箱配置</span>
                    </a>
                </div>
            </nav>
            
            <div class="user-info">
                <div class="user-avatar">A</div>
                <div class="user-name">管理员</div>
                <div class="user-role">系统管理员</div>
            </div>
        </aside>
        
        <!-- 主要内容区域 -->
        <main class="admin-main">
            <header class="admin-header">
                <button class="btn-secondary mobile-menu-btn" style="display: none;">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-actions">
                    <button class="btn-secondary">
                        <i class="fas fa-bell"></i>
                    </button>
                    <button class="btn-secondary">
                        <i class="fas fa-user-circle"></i>
                    </button>
                </div>
            </header>
            
            <div class="admin-content">
                <!-- 面包屑导航 -->
                <nav class="breadcrumb">
                    <a href="admin.html">仪表盘</a>
                    <span class="breadcrumb-separator">/</span>
                    <a href="admin-config.html">系统配置</a>
                    <span class="breadcrumb-separator">/</span>
                    <span>SMTP邮箱配置</span>
                </nav>
                
                <!-- 页面标题 -->
                <div class="page-header">
                    <div>
                        <h1 class="page-title">SMTP邮箱配置</h1>
                        <p class="page-subtitle">配置网站的邮件发送服务，用于发送系统通知和用户邮件</p>
                    </div>
                    <div class="page-actions">
                        <button class="btn-warning" onclick="testConnection()">
                            <i class="fas fa-vial"></i>
                            <span>测试连接</span>
                        </button>
                        <button class="btn-primary" onclick="saveConfig()">
                            <i class="fas fa-save"></i>
                            <span>保存配置</span>
                        </button>
                    </div>
                </div>
                
                <!-- 连接状态 -->
                <div id="connectionStatus" class="status-indicator disconnected">
                    <div class="status-dot disconnected"></div>
                    <span>SMTP服务未连接</span>
                </div>
                
                <!-- 快速配置预设 -->
                <div class="config-card">
                    <div class="config-header">
                        <h2 class="config-title">快速配置</h2>
                        <p class="config-subtitle">选择常用邮箱服务商的预设配置</p>
                    </div>
                    <div class="config-body">
                        <div class="preset-grid">
                            <div class="preset-card" onclick="selectPreset('gmail')">
                                <div class="preset-title">
                                    <i class="fab fa-google" style="color: #EA4335;"></i>
                                    <span>Gmail</span>
                                </div>
                                <div class="preset-description">Google Gmail SMTP服务</div>
                                <div class="preset-details">smtp.gmail.com:587 (TLS)</div>
                            </div>
                            
                            <div class="preset-card" onclick="selectPreset('outlook')">
                                <div class="preset-title">
                                    <i class="fab fa-microsoft" style="color: #0078D4;"></i>
                                    <span>Outlook</span>
                                </div>
                                <div class="preset-description">Microsoft Outlook SMTP服务</div>
                                <div class="preset-details">smtp-mail.outlook.com:587 (TLS)</div>
                            </div>
                            
                            <div class="preset-card" onclick="selectPreset('qq')">
                                <div class="preset-title">
                                    <i class="fab fa-qq" style="color: #12B7F5;"></i>
                                    <span>QQ邮箱</span>
                                </div>
                                <div class="preset-description">腾讯QQ邮箱SMTP服务</div>
                                <div class="preset-details">smtp.qq.com:587 (TLS)</div>
                            </div>
                            
                            <div class="preset-card" onclick="selectPreset('163')">
                                <div class="preset-title">
                                    <i class="fas fa-envelope" style="color: #FF6600;"></i>
                                    <span>163邮箱</span>
                                </div>
                                <div class="preset-description">网易163邮箱SMTP服务</div>
                                <div class="preset-details">smtp.163.com:465 (SSL)</div>
                            </div>
                            
                            <div class="preset-card" onclick="selectPreset('custom')">
                                <div class="preset-title">
                                    <i class="fas fa-cog" style="color: #6B7280;"></i>
                                    <span>自定义配置</span>
                                </div>
                                <div class="preset-description">手动配置SMTP服务器</div>
                                <div class="preset-details">自定义服务器和端口</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- SMTP服务器配置 -->
                <div class="config-card">
                    <div class="config-header">
                        <h2 class="config-title">SMTP服务器设置</h2>
                        <p class="config-subtitle">配置邮件服务器的连接参数</p>
                    </div>
                    <div class="config-body">
                        <form id="smtpForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="smtpHost" class="form-label required">SMTP服务器</label>
                                    <input type="text" id="smtpHost" name="smtpHost" class="form-input" 
                                           placeholder="smtp.gmail.com">
                                    <div class="form-help">邮件服务器的主机地址</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="smtpPort" class="form-label required">端口号</label>
                                    <select id="smtpPort" name="smtpPort" class="form-input">
                                        <option value="25">25 (无加密)</option>
                                        <option value="587" selected>587 (TLS)</option>
                                        <option value="465">465 (SSL)</option>
                                        <option value="2525">2525 (备用)</option>
                                    </select>
                                    <div class="form-help">SMTP服务器端口，推荐使用587</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="smtpSecurity" class="form-label">加密方式</label>
                                    <select id="smtpSecurity" name="smtpSecurity" class="form-input">
                                        <option value="none">无加密</option>
                                        <option value="tls" selected>TLS</option>
                                        <option value="ssl">SSL</option>
                                    </select>
                                    <div class="form-help">邮件传输加密方式</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="smtpTimeout" class="form-label">连接超时</label>
                                    <select id="smtpTimeout" name="smtpTimeout" class="form-input">
                                        <option value="10">10秒</option>
                                        <option value="30" selected>30秒</option>
                                        <option value="60">60秒</option>
                                        <option value="120">120秒</option>
                                    </select>
                                    <div class="form-help">SMTP连接超时时间</div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 认证信息 -->
                <div class="config-card">
                    <div class="config-header">
                        <h2 class="config-title">认证信息</h2>
                        <p class="config-subtitle">配置SMTP服务器的登录凭据</p>
                    </div>
                    <div class="config-body">
                        <div class="switch-group">
                            <div class="switch-info">
                                <div class="switch-title">启用SMTP认证</div>
                                <div class="switch-description">大多数SMTP服务器需要用户名和密码认证</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="enableAuth" checked onchange="toggleAuth()">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        
                        <div id="authFields">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="smtpUsername" class="form-label required">用户名</label>
                                    <input type="text" id="smtpUsername" name="smtpUsername" class="form-input" 
                                           placeholder="your-email@gmail.com">
                                    <div class="form-help">SMTP服务器登录用户名，通常是完整的邮箱地址</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="smtpPassword" class="form-label required">密码</label>
                                    <input type="password" id="smtpPassword" name="smtpPassword" class="form-input" 
                                           placeholder="应用专用密码">
                                    <div class="form-help">SMTP服务器登录密码，建议使用应用专用密码</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 发件人信息 -->
                <div class="config-card">
                    <div class="config-header">
                        <h2 class="config-title">发件人信息</h2>
                        <p class="config-subtitle">配置邮件的发送者信息</p>
                    </div>
                    <div class="config-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fromEmail" class="form-label required">发件人邮箱</label>
                                <input type="email" id="fromEmail" name="fromEmail" class="form-input" 
                                       placeholder="noreply@gamehub.com">
                                <div class="form-help">系统发送邮件时显示的发件人邮箱地址</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="fromName" class="form-label required">发件人姓名</label>
                                <input type="text" id="fromName" name="fromName" class="form-input" 
                                       placeholder="GameHub" value="GameHub">
                                <div class="form-help">系统发送邮件时显示的发件人姓名</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="replyToEmail" class="form-label">回复邮箱</label>
                                <input type="email" id="replyToEmail" name="replyToEmail" class="form-input" 
                                       placeholder="support@gamehub.com">
                                <div class="form-help">用户回复邮件时的目标邮箱地址</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 邮件模板设置 -->
                <div class="config-card">
                    <div class="config-header">
                        <h2 class="config-title">邮件模板设置</h2>
                        <p class="config-subtitle">配置系统邮件的模板和样式</p>
                    </div>
                    <div class="config-body">
                        <div class="switch-group">
                            <div class="switch-info">
                                <div class="switch-title">启用HTML邮件</div>
                                <div class="switch-description">发送富文本格式的邮件，支持样式和图片</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="enableHtml" checked>
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        
                        <div class="switch-group">
                            <div class="switch-info">
                                <div class="switch-title">包含网站Logo</div>
                                <div class="switch-description">在邮件头部显示网站Logo</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="includeLogo" checked>
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label for="emailSignature" class="form-label">邮件签名</label>
                            <textarea id="emailSignature" name="emailSignature" class="form-input" 
                                      style="min-height: 100px;" placeholder="邮件底部的签名信息">---
GameHub团队
官网：https://gamehub.com
客服邮箱：support@gamehub.com</textarea>
                            <div class="form-help">在邮件底部显示的签名信息</div>
                        </div>
                    </div>
                </div>
                
                <!-- 高级设置 -->
                <div class="config-card">
                    <div class="config-header">
                        <h2 class="config-title">高级设置</h2>
                        <p class="config-subtitle">配置邮件发送的高级选项</p>
                    </div>
                    <div class="config-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="maxRetries" class="form-label">最大重试次数</label>
                                <select id="maxRetries" name="maxRetries" class="form-input">
                                    <option value="0">不重试</option>
                                    <option value="1">1次</option>
                                    <option value="3" selected>3次</option>
                                    <option value="5">5次</option>
                                </select>
                                <div class="form-help">邮件发送失败时的重试次数</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="retryDelay" class="form-label">重试间隔</label>
                                <select id="retryDelay" name="retryDelay" class="form-input">
                                    <option value="5">5秒</option>
                                    <option value="10" selected>10秒</option>
                                    <option value="30">30秒</option>
                                    <option value="60">60秒</option>
                                </select>
                                <div class="form-help">重试发送邮件的间隔时间</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="rateLimit" class="form-label">发送频率限制</label>
                                <select id="rateLimit" name="rateLimit" class="form-input">
                                    <option value="0">无限制</option>
                                    <option value="10">10封/分钟</option>
                                    <option value="50" selected>50封/分钟</option>
                                    <option value="100">100封/分钟</option>
                                </select>
                                <div class="form-help">每分钟最多发送的邮件数量</div>
                            </div>
                        </div>
                        
                        <div class="switch-group">
                            <div class="switch-info">
                                <div class="switch-title">启用邮件队列</div>
                                <div class="switch-description">将邮件放入队列异步发送，提升系统性能</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="enableQueue" checked>
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        
                        <div class="switch-group">
                            <div class="switch-info">
                                <div class="switch-title">记录发送日志</div>
                                <div class="switch-description">记录邮件发送的详细日志信息</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="enableLogging" checked>
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- 测试结果 -->
                <div id="testResult" class="test-result">
                    <div class="test-result-title">
                        <i class="fas fa-check-circle"></i>
                        <span>连接测试结果</span>
                    </div>
                    <div class="test-result-message">测试邮件发送成功！SMTP配置正确。</div>
                </div>
                
                <!-- 发送日志 -->
                <div class="config-card" style="display: none;" id="logSection">
                    <div class="config-header">
                        <h2 class="config-title">发送日志</h2>
                        <p class="config-subtitle">查看最近的邮件发送记录</p>
                    </div>
                    <div class="config-body">
                        <div class="log-container" id="logContainer">
                            <div class="log-line">
                                <span class="log-timestamp">[2024-01-15 14:30:25]</span>
                                <span class="log-level-info">[INFO]</span>
                                <span>开始测试SMTP连接...</span>
                            </div>
                            <div class="log-line">
                                <span class="log-timestamp">[2024-01-15 14:30:26]</span>
                                <span class="log-level-success">[SUCCESS]</span>
                                <span>SMTP连接成功建立</span>
                            </div>
                            <div class="log-line">
                                <span class="log-timestamp">[2024-01-15 14:30:27]</span>
                                <span class="log-level-success">[SUCCESS]</span>
                                <span>测试邮件发送成功 (to: test@example.com)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // 预设配置数据
        const presets = {
            gmail: {
                host: 'smtp.gmail.com',
                port: '587',
                security: 'tls',
                timeout: '30'
            },
            outlook: {
                host: 'smtp-mail.outlook.com',
                port: '587',
                security: 'tls',
                timeout: '30'
            },
            qq: {
                host: 'smtp.qq.com',
                port: '587',
                security: 'tls',
                timeout: '30'
            },
            '163': {
                host: 'smtp.163.com',
                port: '465',
                security: 'ssl',
                timeout: '30'
            }
        };
        
        // 选择预设配置
        function selectPreset(type) {
            // 移除所有选中状态
            document.querySelectorAll('.preset-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // 添加选中状态
            event.target.closest('.preset-card').classList.add('selected');
            
            if (type !== 'custom' && presets[type]) {
                const preset = presets[type];
                document.getElementById('smtpHost').value = preset.host;
                document.getElementById('smtpPort').value = preset.port;
                document.getElementById('smtpSecurity').value = preset.security;
                document.getElementById('smtpTimeout').value = preset.timeout;
            }
        }
        
        // 切换认证字段显示
        function toggleAuth() {
            const enableAuth = document.getElementById('enableAuth').checked;
            const authFields = document.getElementById('authFields');
            
            if (enableAuth) {
                authFields.style.display = 'block';
            } else {
                authFields.style.display = 'none';
            }
        }
        
        // 测试SMTP连接
        function testConnection() {
            const button = event.target.closest('button');
            const originalText = button.innerHTML;
            
            // 更新按钮状态
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>测试中...</span>';
            
            // 更新连接状态
            const status = document.getElementById('connectionStatus');
            status.className = 'status-indicator testing';
            status.innerHTML = '<div class="status-dot testing"></div><span>正在测试SMTP连接...</span>';
            
            // 显示日志
            const logSection = document.getElementById('logSection');
            logSection.style.display = 'block';
            
            // 模拟测试过程
            setTimeout(() => {
                // 获取表单数据
                const host = document.getElementById('smtpHost').value;
                const port = document.getElementById('smtpPort').value;
                const username = document.getElementById('smtpUsername').value;
                
                if (!host || !port || !username) {
                    // 测试失败
                    status.className = 'status-indicator disconnected';
                    status.innerHTML = '<div class="status-dot disconnected"></div><span>配置信息不完整，请检查必填项</span>';
                    
                    const testResult = document.getElementById('testResult');
                    testResult.className = 'test-result error show';
                    testResult.querySelector('.test-result-title i').className = 'fas fa-times-circle';
                    testResult.querySelector('.test-result-title span').textContent = '连接测试失败';
                    testResult.querySelector('.test-result-message').textContent = '请填写完整的SMTP配置信息。';
                    
                    addLog('error', '测试失败：配置信息不完整');
                } else {
                    // 测试成功
                    status.className = 'status-indicator connected';
                    status.innerHTML = '<div class="status-dot connected"></div><span>SMTP连接正常</span>';
                    
                    const testResult = document.getElementById('testResult');
                    testResult.className = 'test-result success show';
                    testResult.querySelector('.test-result-title i').className = 'fas fa-check-circle';
                    testResult.querySelector('.test-result-title span').textContent = '连接测试成功';
                    testResult.querySelector('.test-result-message').textContent = `成功连接到 ${host}:${port}，测试邮件发送正常。`;
                    
                    addLog('success', `SMTP连接成功 (${host}:${port})`);
                    addLog('success', '测试邮件发送成功');
                }
                
                // 恢复按钮状态
                button.disabled = false;
                button.innerHTML = originalText;
            }, 2000);
        }
        
        // 添加日志
        function addLog(level, message) {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            const logLine = document.createElement('div');
            logLine.className = 'log-line';
            logLine.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-level-${level}">[${level.toUpperCase()}]</span>
                <span>${message}</span>
            `;
            
            logContainer.appendChild(logLine);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        // 保存配置
        function saveConfig() {
            const button = event.target.closest('button');
            const originalText = button.innerHTML;
            
            // 更新按钮状态
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>保存中...</span>';
            
            // 模拟保存过程
            setTimeout(() => {
                // 显示成功消息
                const testResult = document.getElementById('testResult');
                testResult.className = 'test-result success show';
                testResult.querySelector('.test-result-title i').className = 'fas fa-check-circle';
                testResult.querySelector('.test-result-title span').textContent = '配置保存成功';
                testResult.querySelector('.test-result-message').textContent = 'SMTP邮箱配置已成功保存。';
                
                addLog('success', 'SMTP配置保存成功');
                
                // 恢复按钮状态
                button.disabled = false;
                button.innerHTML = originalText;
                
                // 3秒后隐藏消息
                setTimeout(() => {
                    testResult.classList.remove('show');
                }, 3000);
            }, 1000);
        }
        
        // 移动端菜单切换
        function toggleMobileMenu() {
            const sidebar = document.querySelector('.admin-sidebar');
            sidebar.classList.toggle('open');
        }
        
        // 响应式处理
        function handleResize() {
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            if (window.innerWidth <= 1024) {
                mobileMenuBtn.style.display = 'flex';
                mobileMenuBtn.onclick = toggleMobileMenu;
            } else {
                mobileMenuBtn.style.display = 'none';
                document.querySelector('.admin-sidebar').classList.remove('open');
            }
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            handleResize();
            window.addEventListener('resize', handleResize);
            
            // 初始化认证字段显示状态
            toggleAuth();
            
            // 添加初始日志
            addLog('info', 'SMTP配置页面已加载');
        });
    </script>
</body>
</html>